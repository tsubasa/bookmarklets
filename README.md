# rakumoTimeRecorderBookmarklet

## これはなに？

弊社で利用しているrakumoタイムレコーダーの機能を拡張するブックマークレットです。

#### 出来ること

* タイムカードに記録された時間から現在までの勤怠状況を一括計算して表示
* 有休などはコメント欄に入力された文字列を判別して計算（現在対応しているのは有休や午前休、午後休、代休、休出などの文字列）
* 勤怠管理シートのフォーマットでタイムカードをコピー（有休などには * が自動挿入）

## 使い方

### 動作確認環境

* Google Chrome v67+
* Firefox v56+

### ブックマークレットを使えるようにする

#### Google Chrome ユーザーはこちら

1. [/dist/bookmarklet.js](dist/bookmarklet.js) を開きJsコードを丸々コピーする
2. Google Chromeを起動し、ブックマークマネージャー( `chrome://bookmarks/` )を開く
3. 開いたページ内で右クリックし、「新しいブックマークを追加」をクリック
4. 名前はお好きにどうぞ「rakumoタイムカードブックマークレット」など
5. URLに先程コピーしたJsコードを貼り付ける
6. `[保存]`をクリックして完了

#### Firefox ユーザーはこちら

1. [/dist/bookmarklet.js](dist/bookmarklet.js) を開きJsコードを丸々コピーする
2. Firefoxを起動し、ブックマーク管理を開く
3. 開いたウィンドウ内で右クリックし、「新しいブックマーク」をクリック
4. 名前はお好きにどうぞ「rakumoタイムカードブックマークレット」など
5. URLに先程コピーしたJsコードを貼り付ける
6. `[追加]`をクリックして完了

* [ブックマークレットをインストールする方法 | Firefox ヘルプ](https://support.mozilla.org/ja/kb/bookmarklets-perform-common-web-page-tasks)

### 実際に利用してみる

1. [rakumoタイムレコーダー](https://a-rakumo.appspot.com/time_recorder)のページを表示する
2. 先程登録したブックマークをクリックして実行する
3. 時間などが表示されればOK

### 小ネタ、テクニック

* タイムレコーダーのコメント欄に `全休`, `有給`, `有休`, `AM休`, `PM休`, `午前休`, `午後休`, `休出` などの文字列があれば補完して計算します。
* 上記に連動して任意の文字列があればタイムカードコピー時に `*` を自動挿入します。

コメントの文言判定はこちら

| 判定結果 | コメント |
----|----
| 有給休暇 | 全休, 有給, 有休, 休暇, 有給休暇 |
| 午前休 | AM休, AM半休, 午前休 |
| 午後休 | PM休, PM半休, 午後休 |
| 休日出勤 | 休出, 休日出勤 |
| 振替休日 | 代休, 振休, 振替休日 |

## 注意事項

* 深夜作業など深夜帯の計算には対応していません。
* 夏期休暇をずらして取得すると正しく計算が出来ません。
